{
    "__requires": [
        {
            "id": "bargauge",
            "name": "Bar gauge",
            "type": "panel",
            "version": ""
        },
        {
            "id": "gauge",
            "name": "Gauge",
            "type": "panel",
            "version": ""
        },
        {
            "id": "grafana",
            "name": "Grafana",
            "type": "grafana",
            "version": "8.1.2"
        },
        {
            "id": "graphite",
            "name": "Graphite",
            "type": "datasource",
            "version": "1.0.0"
        },
        {
            "id": "stat",
            "name": "Stat",
            "type": "panel",
            "version": ""
        },
        {
            "id": "table",
            "name": "Table",
            "type": "panel",
            "version": ""
        },
        {
            "id": "timeseries",
            "name": "Time series",
            "type": "panel",
            "version": ""
        }
    ],
    "annotations": {
        "list": [
            {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "target": {
                    "limit": 100,
                    "matchAny": false,
                    "tags": [],
                    "type": "dashboard"
                },
                "type": "dashboard"
            }
        ]
    },
    "description": "\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: \u0414\u043e\u0431\u0440\u043e\u0432\u043e\u043b\u044c\u0441\u043a\u0438\u0439 \u0410.\u0418. (\u0410\u0426\u041e\u0414)",
    "editable": true,
    "gnetId": null,
    "graphTooltip": 1,
    "id": 1992,
    "iteration": 1648535508383,
    "links": [],
    "panels": [
        {
            "collapsed": false,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
            },
            "id": 57,
            "panels": [],
            "title": "Service status",
            "type": "row"
        },
        {
            "datasource": "carbon-short",
            "description": "\u041f\u0440\u043e\u0446\u0435\u043d\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0431\u0435\u0437\u043e\u0442\u043a\u0430\u0437\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043b\u0443\u0436\u0431\u044b",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "mappings": [],
                    "max": 1,
                    "min": 0,
                    "noValue": "NO DATA",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "semi-dark-red",
                                "value": null
                            },
                            {
                                "color": "semi-dark-orange",
                                "value": 0.95
                            },
                            {
                                "color": "semi-dark-green",
                                "value": 0.99
                            }
                        ]
                    },
                    "unit": "percentunit"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 6,
                "w": 24,
                "x": 0,
                "y": 1
            },
            "id": 6,
            "options": {
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "mean"
                    ],
                    "fields": "",
                    "values": false
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": true,
                "text": {}
            },
            "pluginVersion": "8.1.2",
            "targets": [
                {
                    "hide": false,
                    "refId": "A",
                    "target": "sortByName(aliasByTags(transformNull(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=up'), 3), 0), 'job'), true, false)",
                    "textEditor": false
                }
            ],
            "title": "Service status over time",
            "transformations": [],
            "type": "gauge"
        },
        {
            "datasource": "carbon-short",
            "description": "Gitlab \u0432\u0435\u0440\u0441\u0438\u044f",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    }
                },
                "overrides": []
            },
            "gridPos": {
                "h": 4,
                "w": 2,
                "x": 0,
                "y": 7
            },
            "id": 10,
            "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "text": {},
                "textMode": "name"
            },
            "pluginVersion": "8.1.2",
            "targets": [
                {
                    "hide": false,
                    "refId": "A",
                    "target": "aliasByTags(seriesByTag('gitlabinstance=$gitlabinstance', 'job=gitaly', 'name=gitlab_build_info', 'version=~*'), 'version')"
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Gitlab Version",
            "transformations": [],
            "type": "stat"
        },
        {
            "datasource": "carbon-short",
            "description": "\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0438\u0437\u043c\u0435\u0440\u044f\u0435\u0442 \u0434\u043e\u043b\u044e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0432 \u0441\u043b\u0443\u0436\u0431\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u044b \u0438 \u043c\u043e\u0433\u0443\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b. \u0427\u0435\u043c \u0431\u043b\u0438\u0436\u0435 \u043a 100%, \u0442\u0435\u043c \u043b\u0443\u0447\u0448\u0435.",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": 120000,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "noValue": "0",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    },
                    "unit": "percentunit"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 10,
                "w": 8,
                "x": 2,
                "y": 7
            },
            "id": 32,
            "options": {
                "legend": {
                    "calcs": [
                        "mean",
                        "last"
                    ],
                    "displayMode": "table",
                    "placement": "right"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.2.3",
            "targets": [
                {
                    "refId": "A",
                    "target": "aliasSub(aliasSub(transformNull(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=gitlab_sli:job:availability:ratio'), 5), 0), '^.*job=', ''), '\\&.*', '')"
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Service status",
            "type": "timeseries"
        },
        {
            "datasource": "carbon-short",
            "description": "\n\u041d\u0430\u0441\u044b\u0449\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u2014 \u044d\u0442\u043e \u043c\u0435\u0440\u0430 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043d\u0430\u0441\u044b\u0449\u0435\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0443\u0441\u043b\u0443\u0433\u0438. \u041d\u0438\u0436\u0435 - \u043b\u0443\u0447\u0448\u0435.",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 0,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": 180000,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "max": 1,
                    "min": 0,
                    "noValue": "0",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "semi-dark-red",
                                "value": null
                            },
                            {
                                "color": "semi-dark-orange",
                                "value": 0.95
                            },
                            {
                                "color": "semi-dark-green",
                                "value": 0.99
                            }
                        ]
                    },
                    "unit": "percentunit"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 10,
                "w": 8,
                "x": 10,
                "y": 7
            },
            "id": 33,
            "options": {
                "legend": {
                    "calcs": [
                        "lastNotNull",
                        "mean"
                    ],
                    "displayMode": "table",
                    "placement": "right"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.2.3",
            "targets": [
                {
                    "refCount": 0,
                    "refId": "A",
                    "target": "aliasSub(aliasSub(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=gitlab_sli:gitlab_service_saturation:ratio'), 'gitlab_sli:gitlab_service_saturation:ratio\\?component=', ''), '\\&.*', '')"
                }
            ],
            "title": "Service saturation",
            "type": "timeseries"
        },
        {
            "datasource": "carbon-short",
            "description": "\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u2014 \u044d\u0442\u043e \u0441\u0443\u043c\u043c\u0430 \u0432\u0441\u0435\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c\u044b\u0445 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u044d\u0442\u043e\u0439 \u0441\u043b\u0443\u0436\u0431\u044b. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043e\u0434\u0438\u043d \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043a \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c \u043a \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u043c. \u0412\u044b\u0448\u0435 \u0437\u0430\u043d\u044f\u0442\u043e.",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "Operations per second",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": 60000,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "noValue": "0",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 10,
                "w": 6,
                "x": 18,
                "y": 7
            },
            "id": 87,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.2.3",
            "targets": [
                {
                    "hide": false,
                    "refCount": 0,
                    "refId": "A",
                    "target": "movingAverage(alias(sum(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=gitlab_sli:code_method_route:workhorse_http_request_count:rate1m')), 'gitlab-workhorse'), '1min')",
                    "textEditor": false
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Service RPS",
            "transformations": [
                {
                    "id": "renameByRegex",
                    "options": {
                        "regex": "(.*)",
                        "renamePattern": "gitlab-workhorse"
                    }
                }
            ],
            "type": "timeseries"
        },
        {
            "datasource": "carbon-short",
            "description": "Git \u0432\u0435\u0440\u0441\u0438\u044f",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    }
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 0,
                "y": 11
            },
            "id": 8,
            "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "text": {},
                "textMode": "name"
            },
            "pluginVersion": "8.1.2",
            "targets": [
                {
                    "hide": false,
                    "refId": "A",
                    "target": "aliasByTags(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=gitaly', 'name=gitlab_build_info', 'git_version=~*'), 'git_version')"
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Git Version",
            "transformations": [],
            "type": "stat"
        },
        {
            "datasource": "carbon-short",
            "description": "\u0412\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 Gitlbab",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "ns"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 0,
                "y": 14
            },
            "id": 68,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "last"
                    ],
                    "fields": "",
                    "values": false
                },
                "text": {},
                "textMode": "value"
            },
            "pluginVersion": "8.1.2",
            "targets": [
                {
                    "hide": false,
                    "refId": "A",
                    "target": "keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=docker_container_status.uptime_ns', 'container_name=gitlab'), 5)"
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Docker container uptime",
            "transformations": [],
            "type": "stat"
        },
        {
            "collapsed": false,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 17
            },
            "id": 45,
            "panels": [],
            "title": "Host system",
            "type": "row"
        },
        {
            "datasource": "carbon-short",
            "description": "\u041f\u0430\u043c\u044f\u0442\u044c \u043f\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\u043c",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "decbytes"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 6,
                "w": 7,
                "x": 0,
                "y": 18
            },
            "id": 70,
            "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center",
                "orientation": "vertical",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.1.2",
            "targets": [
                {
                    "hide": false,
                    "refCount": 0,
                    "refId": "A",
                    "target": "aliasByTags(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=docker.memory_total'), 'name')",
                    "textEditor": false
                },
                {
                    "hide": false,
                    "refCount": 0,
                    "refId": "B",
                    "target": "aliasByTags(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=docker_container_mem.limit'), 'container_name')",
                    "textEditor": false
                }
            ],
            "title": "Docker - memory limit",
            "transformations": [
                {
                    "id": "rowsToFields",
                    "options": {
                        "mappings": [
                            {
                                "fieldName": "docker.memory_total",
                                "handlerKey": "field.name"
                            },
                            {
                                "fieldName": "Time",
                                "handlerKey": "max"
                            }
                        ]
                    }
                }
            ],
            "type": "stat"
        },
        {
            "datasource": "carbon-short",
            "description": "\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\u043c",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 13,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": 180000,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "decimals": 0,
                    "mappings": [],
                    "max": 100,
                    "min": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "#EAB839",
                                "value": 80
                            },
                            {
                                "color": "semi-dark-red",
                                "value": 90
                            }
                        ]
                    },
                    "unit": "percent"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 7,
                "y": 18
            },
            "id": 72,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.2.3",
            "targets": [
                {
                    "hide": true,
                    "refCount": -1,
                    "refId": "B",
                    "target": "keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=docker_container_mem.limit'), 2)",
                    "textEditor": false
                },
                {
                    "hide": false,
                    "refCount": 0,
                    "refId": "C",
                    "target": "alias(asPercent(keepLastValue(seriesByTag('name=docker_container_mem.usage', 'servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance'), 2), #B), 'mem usage')",
                    "targetFull": "alias(asPercent(keepLastValue(seriesByTag('name=docker_container_mem.usage', 'servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance'), 2), keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=docker_container_mem.limit'), 2)), 'mem usage')",
                    "textEditor": false
                }
            ],
            "title": "Docker Memory Usage",
            "transformations": [
                {
                    "id": "rowsToFields",
                    "options": {
                        "mappings": [
                            {
                                "fieldName": "docker.memory_total",
                                "handlerKey": "field.name"
                            },
                            {
                                "fieldName": "Time",
                                "handlerKey": "max"
                            }
                        ]
                    }
                }
            ],
            "type": "timeseries"
        },
        {
            "datasource": "carbon-short",
            "description": "% \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": 180000,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "max": 100,
                    "min": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    },
                    "unit": "percent"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 6,
                "w": 9,
                "x": 15,
                "y": 18
            },
            "id": 77,
            "options": {
                "legend": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "displayMode": "hidden",
                    "placement": "right"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.1.2",
            "targets": [
                {
                    "refId": "A",
                    "target": "aliasByTags(keepLastValue(seriesByTag('name=docker_container_cpu.usage_percent', 'servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance'), 5), 'container_name')"
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Docker - cpu usage",
            "type": "timeseries"
        },
        {
            "datasource": "carbon-short",
            "description": "% \u0437\u0430\u043d\u044f\u0442\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "max": 100,
                    "min": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "semi-dark-green",
                                "value": null
                            },
                            {
                                "color": "#EAB839",
                                "value": 60
                            },
                            {
                                "color": "red",
                                "value": 80
                            },
                            {
                                "color": "dark-red",
                                "value": 95
                            }
                        ]
                    },
                    "unit": "percent"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 10,
                "w": 4,
                "x": 0,
                "y": 24
            },
            "id": 75,
            "options": {
                "displayMode": "lcd",
                "orientation": "horizontal",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "showUnfilled": true,
                "text": {}
            },
            "pluginVersion": "8.1.2",
            "repeat": null,
            "targets": [
                {
                    "refId": "A",
                    "target": "aliasSub(aliasByTags(seriesByTag('name=system.disk.used_percent', 'servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance'), 'path'), '-', '/')",
                    "textEditor": false
                }
            ],
            "title": "Linux - Disk usage",
            "transformations": [],
            "type": "bargauge"
        },
        {
            "datasource": "carbon-short",
            "description": "% \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0426\u041f\u0423",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": true,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "decimals": 0,
                    "mappings": [],
                    "max": 100,
                    "min": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    },
                    "unit": "percent"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 10,
                "w": 10,
                "x": 4,
                "y": 24
            },
            "id": 79,
            "options": {
                "legend": {
                    "calcs": [
                        "last",
                        "max",
                        "mean"
                    ],
                    "displayMode": "table",
                    "placement": "right"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.2.3",
            "targets": [
                {
                    "hide": false,
                    "refCount": 0,
                    "refId": "A",
                    "target": "exclude(exclude(aliasByTags(keepLastValue(seriesByTag('name=~system.cpu.*', 'cpu=cpu-total', 'servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance'), 3), 'name'), 'idle'), 'active')",
                    "textEditor": false
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Linux - CPU Usage",
            "type": "timeseries"
        },
        {
            "datasource": "carbon-short",
            "description": "tcp_close - \u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0443\u0437\u043b\u0430. \u0424\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0444\u0438\u043a\u0442\u0438\u0432\u043d\u043e\u0435\n\ntcp_lisnet - \u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\n\ntcp_syn-sent - \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0437\u0430\u043f\u0440\u043e\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u043d\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0438 \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430\n\ntcp_syn-received - \u0421\u0435\u0440\u0432\u0435\u0440 \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435, \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u043e\u0442\u0432\u0435\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0438 \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f\n\ntcp_established - \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e, \u0438\u0434\u0451\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445\n\ntcp_fin_wait1 - \u041e\u0434\u043d\u0430 \u0438\u0437 \u0441\u0442\u043e\u0440\u043e\u043d (\u043d\u0430\u0437\u043e\u0432\u0451\u043c \u0435\u0451 \u0443\u0437\u0435\u043b-1) \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435, \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0432 \u0441\u0435\u0433\u043c\u0435\u043d\u0442 \u0441 \u0444\u043b\u0430\u0433\u043e\u043c FIN\n\ntcp_close_wait - \u0414\u0440\u0443\u0433\u0430\u044f \u0441\u0442\u043e\u0440\u043e\u043d\u0430 (\u0443\u0437\u0435\u043b-2) \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u0432 \u044d\u0442\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435, \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0432, \u0432 \u0441\u0432\u043e\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0441\u0435\u0433\u043c\u0435\u043d\u0442 ACK \u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0435\u0442 \u043e\u0434\u043d\u043e\u0441\u0442\u043e\u0440\u043e\u043d\u043d\u044e\u044e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0443\n\ntcp_fin_wait2 - \u0423\u0437\u0435\u043b-1 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 ACK, \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0435\u0442 \u0447\u0442\u0435\u043d\u0438\u0435 \u0438 \u0436\u0434\u0451\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 \u0441 \u0444\u043b\u0430\u0433\u043e\u043c FIN\n\ntcp_last_ack - \u0423\u0437\u0435\u043b-2 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0443 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0435\u0433\u043c\u0435\u043d\u0442 \u0441 \u0444\u043b\u0430\u0433\u043e\u043c FIN\n\ntcp_time_wait - \u0423\u0437\u0435\u043b-1 \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u0441\u0435\u0433\u043c\u0435\u043d\u0442 \u0441 \u0444\u043b\u0430\u0433\u043e\u043c FIN, \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0441\u0435\u0433\u043c\u0435\u043d\u0442 \u0441 \u0444\u043b\u0430\u0433\u043e\u043c ACK \u0438 \u0436\u0434\u0451\u0442 2*MSL \u0441\u0435\u043a\u0443\u043d\u0434, \u043f\u0435\u0440\u0435\u0434 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435\u043c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\n\ntcp_closing - \u041e\u0431\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0438\u043d\u0438\u0446\u0438\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e: \u043f\u043e\u0441\u043b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 \u0441 \u0444\u043b\u0430\u0433\u043e\u043c FIN \u0443\u0437\u0435\u043b-1 \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u0435\u0433\u043c\u0435\u043d\u0442 FIN, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 ACK \u0438 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 ACK (\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0432\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u043e \u0440\u0430\u0437\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438)",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": 180000,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    },
                    "unit": "short"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 10,
                "w": 10,
                "x": 14,
                "y": 24
            },
            "id": 81,
            "options": {
                "legend": {
                    "calcs": [
                        "last",
                        "mean",
                        "max"
                    ],
                    "displayMode": "table",
                    "placement": "right"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.2.3",
            "targets": [
                {
                    "refId": "A",
                    "target": "aliasByMetric(aliasByTags(seriesByTag('name=~system.netstat.tcp_*', 'servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance'), 'name'))"
                }
            ],
            "timeFrom": null,
            "timeShift": null,
            "title": "Linux - network",
            "type": "timeseries"
        },
        {
            "collapsed": true,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 34
            },
            "id": 55,
            "panels": [
                {
                    "datasource": "carbon-short",
                    "description": "\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430\u044f \u043f\u0430\u043c\u044f\u0442\u044c \u0443\u0437\u043b\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "max": 1,
                            "min": 0,
                            "noValue": "NO DATA",
                            "thresholds": {
                                "mode": "percentage",
                                "steps": [
                                    {
                                        "color": "semi-dark-red",
                                        "value": null
                                    },
                                    {
                                        "color": "semi-dark-orange",
                                        "value": 5
                                    },
                                    {
                                        "color": "green",
                                        "value": 10
                                    }
                                ]
                            },
                            "unit": "percentunit"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 4,
                        "x": 0,
                        "y": 35
                    },
                    "id": 19,
                    "options": {
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "last"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "showThresholdLabels": false,
                        "showThresholdMarkers": true,
                        "text": {}
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "divideSeries(keepLastValue(alias(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_memory_MemAvailable_bytes'), 'Available'), 2), #B)",
                            "targetFull": "divideSeries(keepLastValue(alias(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_memory_MemAvailable_bytes'), 'Available'), 2), keepLastValue(alias(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_memory_MemTotal_bytes'), 'Total'), 2))"
                        },
                        {
                            "hide": true,
                            "refCount": -1,
                            "refId": "B",
                            "target": "keepLastValue(alias(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_memory_MemTotal_bytes'), 'Total'), 2)"
                        }
                    ],
                    "title": "Node Available Memory",
                    "transformations": [],
                    "type": "gauge"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430\u044f \u043f\u0430\u043c\u044f\u0442\u044c \u0443\u0437\u043b\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 19,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineStyle": {
                                    "fill": "solid"
                                },
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "min": 0,
                            "thresholds": {
                                "mode": "percentage",
                                "steps": [
                                    {
                                        "color": "semi-dark-red",
                                        "value": null
                                    }
                                ]
                            },
                            "unit": "percentunit"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 6,
                        "x": 4,
                        "y": 35
                    },
                    "id": 20,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "hidden",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "pluginVersion": "8.2.3",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_memory_MemAvailable_bytes'), 3), 'Available')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_memory_MemTotal_bytes'), 3), 'Total')"
                        }
                    ],
                    "title": "Node Available Memory",
                    "transformations": [
                        {
                            "id": "calculateField",
                            "options": {
                                "binary": {
                                    "left": "Available",
                                    "operator": "/",
                                    "reducer": "sum",
                                    "right": "Total"
                                },
                                "mode": "binary",
                                "reduce": {
                                    "reducer": "sum"
                                },
                                "replaceFields": true
                            }
                        }
                    ],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0420\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u043d\u0430\u044f \u043f\u0430\u043c\u044f\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "bytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 7,
                        "x": 10,
                        "y": 35
                    },
                    "id": 64,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull",
                                "mean"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "aliasByTags(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=process_resident_memory_bytes'), 3), 'job')"
                        }
                    ],
                    "title": "Process resident memory",
                    "transformations": [],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0412\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0430\u043c\u044f\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "bytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 7,
                        "x": 17,
                        "y": 35
                    },
                    "id": 65,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull",
                                "mean"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "aliasByTags(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=process_virtual_memory_bytes'), 3), 'job')"
                        }
                    ],
                    "title": "Process virtual memory",
                    "transformations": [],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430 \u0443\u0437\u043b\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "max": 1,
                            "min": 0,
                            "noValue": "NO DATA",
                            "thresholds": {
                                "mode": "percentage",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "#EAB839",
                                        "value": 80
                                    },
                                    {
                                        "color": "red",
                                        "value": 90
                                    }
                                ]
                            },
                            "unit": "percentunit"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 4,
                        "x": 0,
                        "y": 41
                    },
                    "id": 23,
                    "options": {
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "last"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "showThresholdLabels": false,
                        "showThresholdMarkers": true,
                        "text": {}
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "offset(scale(keepLastValue(perSecond(avg(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_cpu_seconds_total', 'mode=idle'))), 2), -1, 0), 1)"
                        }
                    ],
                    "title": "Node CPU Load",
                    "transformations": [
                        {
                            "id": "calculateField",
                            "options": {
                                "binary": {
                                    "left": "1",
                                    "operator": "-",
                                    "reducer": "sum",
                                    "right": "keepLastValue(perSecond(avgSeries(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=~test-okunev-glb\\.tensor\\.ru', 'job=node', 'name=node_cpu_seconds_total', 'mode=idle'))),2)"
                                },
                                "mode": "binary",
                                "reduce": {
                                    "reducer": "sum"
                                },
                                "replaceFields": true
                            }
                        }
                    ],
                    "type": "gauge"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430 \u0443\u0437\u043b\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 10,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "min": 0,
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "percentunit"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 6,
                        "x": 4,
                        "y": 41
                    },
                    "id": 22,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "hidden",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(offset(scale(perSecond(avg(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=node_cpu_seconds_total', 'mode=idle'))), -1), 1), 'cpu_load')"
                        }
                    ],
                    "title": "Node CPU Load",
                    "transformations": [],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u0438 \u0443\u0437\u043b\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 10,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "none"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 6,
                        "x": 10,
                        "y": 41
                    },
                    "id": 66,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "hidden",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "perSecond(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=node_context_switches_total'), 3))"
                        }
                    ],
                    "title": "Node Context switches",
                    "transformations": [],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u041f\u0440\u043e\u0446\u0435\u0441\u0441\u044b",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "bars",
                                "fillOpacity": 48,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "normal"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "none"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 8,
                        "x": 16,
                        "y": 41
                    },
                    "id": 67,
                    "options": {
                        "legend": {
                            "calcs": [
                                "min",
                                "max",
                                "mean"
                            ],
                            "displayMode": "table",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=node_procs_running'), 2), 'Processes in runnable state')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'name=node_procs_blocked'), 2), 'Processes blocked waiting for I/O to complete')"
                        }
                    ],
                    "title": "Processes",
                    "transformations": [],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u041f\u0430\u043c\u044f\u0442\u044c \u0443\u0437\u043b\u0430",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "bytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 24,
                        "x": 0,
                        "y": 48
                    },
                    "id": 73,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull",
                                "mean"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "aliasSub(aliasByTags(keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=node', 'name=~node_memory_(MemTotal|MemAvailable|MemFree|Buffers|Chached)_bytes'), 3), 'name'), '(node_memory_|Mem|_bytes)', '')",
                            "textEditor": false
                        }
                    ],
                    "title": "Node Memory",
                    "transformations": [],
                    "type": "timeseries"
                }
            ],
            "title": "Node exporter",
            "type": "row"
        },
        {
            "collapsed": true,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 35
            },
            "id": 53,
            "panels": [
                {
                    "datasource": "carbon-short",
                    "description": "\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 Redis",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "noValue": "NO DATA",
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    }
                                ]
                            },
                            "unit": "dateTimeFromNow"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 5,
                        "w": 3,
                        "x": 0,
                        "y": 55
                    },
                    "id": 24,
                    "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "lastNotNull"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "text": {},
                        "textMode": "value"
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": -1,
                            "refId": "A",
                            "target": "scale(aliasByTags(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=redis', 'name=redis_start_time_seconds'), 'pg_postmaster_start_time_seconds'), 1000)"
                        }
                    ],
                    "timeFrom": null,
                    "timeShift": null,
                    "title": "Redis Start",
                    "transformations": [],
                    "type": "stat"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b Redis",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 17,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 12,
                        "w": 7,
                        "x": 3,
                        "y": 55
                    },
                    "id": 29,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "refId": "A",
                            "target": "aliasByTags(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=redis', 'name=redis_db_keys'), 'db')"
                        }
                    ],
                    "title": "Redis Items",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0412\u044b\u0437\u043e\u0432\u044b \u043a\u043e\u043c\u0430\u043d\u0434 Redis",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 17,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "reqps"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 12,
                        "w": 7,
                        "x": 10,
                        "y": 55
                    },
                    "id": 31,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refId": "A",
                            "target": "aliasByTags(perSecond(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=redis', 'name=redis_commands_total', 'cmd=~*')), 'cmd')"
                        }
                    ],
                    "title": "Redis Commands Calls",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b Redis",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 17,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "reqps"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 7,
                        "x": 17,
                        "y": 55
                    },
                    "id": 30,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "hidden",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refId": "A",
                            "target": "perSecond(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=redis', 'name=redis_commands_processed_total'))"
                        }
                    ],
                    "title": "Redis Commands Executed",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u041a\u043b\u0438\u0435\u043d\u0442\u044b Redis",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "noValue": "NO DATA",
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 3,
                        "x": 0,
                        "y": 60
                    },
                    "id": 27,
                    "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "last"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "text": {},
                        "textMode": "value"
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "refId": "A",
                            "target": "keepLastValue(seriesByTag('servertype=gitlab-omnibus', 'gitlabinstance=$gitlabinstance', 'job=redis', 'name=redis_connected_clients'), 5)"
                        }
                    ],
                    "title": "Redis Clients",
                    "type": "stat"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438 Redis",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 17,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "bytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 7,
                        "x": 17,
                        "y": 61
                    },
                    "id": 28,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "list",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(seriesByTag('gitlabinstance=$gitlabinstance', 'name=redis_memory_used_bytes'), 'UsedBytes')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(seriesByTag('gitlabinstance=$gitlabinstance', 'name=redis_config_maxmemory'), 'ConfigMax')"
                        }
                    ],
                    "title": "Redis Memory Usage",
                    "type": "timeseries"
                }
            ],
            "title": "Redis",
            "type": "row"
        },
        {
            "collapsed": true,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 36
            },
            "id": 51,
            "panels": [
                {
                    "datasource": "carbon-short",
                    "description": "\u0412\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b Postmaster",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    }
                                ]
                            },
                            "unit": "dateTimeFromNow"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 3,
                        "x": 0,
                        "y": 68
                    },
                    "id": 9,
                    "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "lastNotNull"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "text": {},
                        "textMode": "value"
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": -1,
                            "refId": "A",
                            "target": "scale(aliasByTags(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_postmaster_start_time_seconds'), 'pg_postmaster_start_time_seconds'), 1000)"
                        }
                    ],
                    "timeFrom": null,
                    "timeShift": null,
                    "title": "Postmaster Start",
                    "transformations": [],
                    "type": "stat"
                },
                {
                    "datasource": "carbon-short",
                    "description": "PG \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "decimals": 1,
                            "mappings": [],
                            "max": 1,
                            "min": 0,
                            "noValue": "0",
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "#EAB839",
                                        "value": 0.8
                                    },
                                    {
                                        "color": "red",
                                        "value": 0.9
                                    }
                                ]
                            },
                            "unit": "percentunit"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 5,
                        "w": 4,
                        "x": 3,
                        "y": 68
                    },
                    "id": 12,
                    "options": {
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "last"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "showThresholdLabels": false,
                        "showThresholdMarkers": true,
                        "text": {}
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "divideSeries(keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_activity_count')), 5), #B)",
                            "targetFull": "divideSeries(keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_activity_count')), 5), keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_settings_max_connections')), 5))"
                        },
                        {
                            "hide": true,
                            "refCount": -1,
                            "refId": "B",
                            "target": "keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_settings_max_connections')), 5)"
                        }
                    ],
                    "title": "PG Connections",
                    "type": "gauge"
                },
                {
                    "datasource": "carbon-short",
                    "description": "PG \u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "decimals": 1,
                            "mappings": [],
                            "max": 1,
                            "min": 0,
                            "noValue": "0",
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "#EAB839",
                                        "value": 0.8
                                    },
                                    {
                                        "color": "red",
                                        "value": 0.9
                                    }
                                ]
                            },
                            "unit": "percentunit"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 5,
                        "w": 4,
                        "x": 7,
                        "y": 68
                    },
                    "id": 88,
                    "options": {
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "last"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "showThresholdLabels": false,
                        "showThresholdMarkers": true,
                        "text": {}
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "divideSeries(keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_activity_count', 'state=active')), 5), #B)",
                            "targetFull": "divideSeries(keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_activity_count', 'state=active')), 5), keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_settings_max_connections')), 5))"
                        },
                        {
                            "hide": true,
                            "refCount": -1,
                            "refId": "B",
                            "target": "keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_settings_max_connections')), 5)"
                        }
                    ],
                    "title": "PG Active Connections",
                    "type": "gauge"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 Postgres",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 10,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "linear",
                                "lineStyle": {
                                    "fill": "solid"
                                },
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 5,
                        "x": 11,
                        "y": 68
                    },
                    "id": 14,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "list",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "pluginVersion": "8.2.3",
                    "targets": [
                        {
                            "hide": false,
                            "refId": "A",
                            "target": "aliasByTags(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_locks_count', 'datname=gitlabhq_production'), 'mode')"
                        }
                    ],
                    "timeFrom": null,
                    "timeShift": null,
                    "title": "Postgres locks",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 10,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "linear",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": true,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "min": 0,
                            "noValue": "0",
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 4,
                        "x": 16,
                        "y": 68
                    },
                    "id": 16,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull",
                                "min",
                                "max"
                            ],
                            "displayMode": "table",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "pluginVersion": "8.2.3",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(perSecond(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_database_xact_commit', 'datname=gitlabhq_production')), 'commit')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(perSecond(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_database_xact_rollback', 'datname=gitlabhq_production')), 'rollback')"
                        }
                    ],
                    "timeFrom": null,
                    "timeShift": null,
                    "title": "Transactions",
                    "transformations": [],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u041c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432 Postgres",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 10,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "linear",
                                "lineStyle": {
                                    "fill": "solid"
                                },
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 4,
                        "x": 20,
                        "y": 68
                    },
                    "id": 15,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "hidden",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "pluginVersion": "8.2.3",
                    "targets": [
                        {
                            "hide": false,
                            "refId": "A",
                            "target": "aliasByTags(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_slow_queries'), 'name')"
                        }
                    ],
                    "timeFrom": null,
                    "timeShift": null,
                    "title": "Postgres slow queries",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "custom": {
                                "align": "auto",
                                "displayMode": "auto"
                            },
                            "decimals": 0,
                            "mappings": [],
                            "min": 0,
                            "noValue": "0",
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 3,
                        "w": 8,
                        "x": 3,
                        "y": 73
                    },
                    "id": 17,
                    "options": {
                        "frameIndex": 1,
                        "showHeader": false
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_activity_count', 'state=active')), 5), 'Active', false)"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "C",
                            "target": "alias(keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_stat_activity_count')), 5), 'Total', false)"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(keepLastValue(sum(seriesByTag('gitlabinstance=$gitlabinstance', 'name=pg_settings_max_connections')), 5), 'Max', false)"
                        }
                    ],
                    "transformations": [
                        {
                            "id": "seriesToRows",
                            "options": {}
                        },
                        {
                            "id": "groupBy",
                            "options": {
                                "fields": {
                                    "Metric": {
                                        "aggregations": [],
                                        "operation": "groupby"
                                    },
                                    "Value": {
                                        "aggregations": [
                                            "last"
                                        ],
                                        "operation": "aggregate"
                                    }
                                }
                            }
                        }
                    ],
                    "type": "table"
                }
            ],
            "title": "Postgres",
            "type": "row"
        },
        {
            "collapsed": true,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 37
            },
            "id": 49,
            "panels": [
                {
                    "datasource": "carbon-short",
                    "description": "\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 Nginx",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 11,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 600000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "s"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 77
                    },
                    "id": 36,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "hidden",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "divideSeries(sum(perSecond(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_upstream_request_seconds_total'), 3))), #B)",
                            "targetFull": "divideSeries(sum(perSecond(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_upstream_request_seconds_total'), 3))), sum(perSecond(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_upstream_requests_total'), 3))))",
                            "textEditor": false
                        },
                        {
                            "hide": true,
                            "refCount": -1,
                            "refId": "B",
                            "target": "sum(perSecond(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_upstream_requests_total'), 3)))",
                            "textEditor": false
                        }
                    ],
                    "title": "Nginx Latency",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0421\u0435\u0440\u0432\u0435\u0440 Nginx - \u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435/\u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0431\u0430\u0439\u0442\u044b (direction.host)",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 60000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "Bps"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 11,
                        "x": 0,
                        "y": 85
                    },
                    "id": 38,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull",
                                "min",
                                "max",
                                "mean"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "refId": "A",
                            "target": "aliasSub(aliasByTags(movingMax(perSecond(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_server_bytes_total')), '1min'), 'direction', 'host'), '\\.-', '.*')"
                        }
                    ],
                    "title": "Nginx Server - Incoming/outgoing bytes (direction.host)",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "Nginx Upstream - \u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435/\u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0431\u0430\u0439\u0442\u044b (direction.backend.upstream)",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 60000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "Bps"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 13,
                        "x": 11,
                        "y": 85
                    },
                    "id": 39,
                    "interval": null,
                    "maxDataPoints": null,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull",
                                "min",
                                "max",
                                "mean"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "refId": "A",
                            "target": "aliasByTags(movingMax(perSecond(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_upstream_bytes_total')), '1min'), 'direction', 'backend', 'upstream')"
                        }
                    ],
                    "title": "Nginx Upstream - Incoming/outgoing bytes (direction.backend.upstream)",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0421\u0435\u0440\u0432\u0435\u0440 Nginx - \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043a\u043e\u0434\u0443 HTTP (code.host)",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 60000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "reqps"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 12,
                        "w": 11,
                        "x": 0,
                        "y": 93
                    },
                    "id": 40,
                    "interval": null,
                    "maxDataPoints": null,
                    "options": {
                        "legend": {
                            "calcs": [
                                "lastNotNull",
                                "min",
                                "max",
                                "mean"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refId": "A",
                            "target": "aliasSub(aliasByTags(movingMax(perSecond(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_server_requests_total')), '1min'), 'code', 'host'), '\\.-', '.*')",
                            "textEditor": false
                        }
                    ],
                    "timeFrom": null,
                    "title": "Nginx Server - Requests by HTTP Code (code.host)",
                    "transformations": [],
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "Nginx Upstream - \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043a\u043e\u0434\u0443 HTTP (code.backend.upstream)",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 60000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "reqps"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 12,
                        "w": 13,
                        "x": 11,
                        "y": 93
                    },
                    "id": 41,
                    "interval": "10s",
                    "maxDataPoints": 1488,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "list",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": true,
                            "refCount": 0,
                            "refId": "A",
                            "target": "aliasByTags(perSecond(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_upstream_requests_total')), 'code', 'backend', 'upstream')",
                            "textEditor": false
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "C",
                            "target": "aliasByTags(movingMax(perSecond(seriesByTag('gitlabinstance=$gitlabinstance', 'name=nginx_vts_upstream_requests_total')), '1min'), 'code', 'backend', 'upstream')",
                            "textEditor": false
                        }
                    ],
                    "timeFrom": null,
                    "title": "Nginx Upstream - Requests by HTTP Code (code.backend.upstream)",
                    "transformations": [
                        {
                            "id": "renameByRegex",
                            "options": {
                                "regex": "(B {backend=\")",
                                "renamePattern": ""
                            }
                        },
                        {
                            "disabled": true,
                            "id": "renameByRegex",
                            "options": {
                                "regex": "(\",code=\")",
                                "renamePattern": ""
                            }
                        }
                    ],
                    "type": "timeseries"
                }
            ],
            "title": "Nginx",
            "type": "row"
        },
        {
            "collapsed": true,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 38
            },
            "id": 47,
            "panels": [
                {
                    "datasource": "carbon-short",
                    "description": "Prometheus WAL \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f ",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "#EAB839",
                                        "value": 0.1
                                    },
                                    {
                                        "color": "red",
                                        "value": 1
                                    }
                                ]
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 0,
                        "y": 23
                    },
                    "id": 62,
                    "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "reduceOptions": {
                            "calcs": [
                                "max"
                            ],
                            "fields": "",
                            "values": false
                        },
                        "text": {},
                        "textMode": "auto"
                    },
                    "pluginVersion": "8.1.2",
                    "targets": [
                        {
                            "refId": "A",
                            "target": "keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=prometheus_tsdb_wal_corruptions_total'), 3)"
                        }
                    ],
                    "title": "Prometheus WAL Corruptions",
                    "type": "stat"
                },
                {
                    "datasource": "carbon-short",
                    "description": "Prometheus Scrape Duration",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "s"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 11,
                        "w": 8,
                        "x": 6,
                        "y": 23
                    },
                    "id": 59,
                    "options": {
                        "legend": {
                            "calcs": [
                                "mean",
                                "last"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "refId": "A",
                            "target": "aliasByTags(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=scrape_duration_seconds'), 2), 'job')"
                        }
                    ],
                    "title": "Prometheus Scrape Duration",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 Prometheus ",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "s"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 11,
                        "w": 10,
                        "x": 14,
                        "y": 23
                    },
                    "id": 63,
                    "options": {
                        "legend": {
                            "calcs": [
                                "mean",
                                "last"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "refId": "A",
                            "target": "aliasByTags(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=prometheus_engine_query_duration_seconds', 'quantile=0.99'), 2), 'slice')"
                        }
                    ],
                    "title": "Prometheus Query Durations",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438 Prometheus",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 180000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "bytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 6,
                        "x": 0,
                        "y": 28
                    },
                    "id": 60,
                    "options": {
                        "legend": {
                            "calcs": [
                                "mean",
                                "last"
                            ],
                            "displayMode": "table",
                            "placement": "right"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=process_resident_memory_bytes', 'job=prometheus'), 2), 'resident memory')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=process_virtual_memory_bytes', 'job=prometheus'), 2), 'virtual memory')"
                        }
                    ],
                    "title": "Prometheus Memory Profile",
                    "type": "timeseries"
                }
            ],
            "title": "Prometheus",
            "type": "row"
        },
        {
            "collapsed": true,
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 39
            },
            "id": 43,
            "panels": [
                {
                    "datasource": "carbon-short",
                    "description": "\u041f\u0430\u043c\u044f\u0442\u044c Ruby \u043d\u0430 \u043e\u0434\u0438\u043d Worker",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 3600000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "min": 0,
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "bytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 11,
                        "x": 0,
                        "y": 24
                    },
                    "id": 83,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "list",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(avg(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=ruby_process_resident_memory_bytes'), 3)), 'Average')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(maxSeries(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=ruby_process_resident_memory_bytes'), 3)), 'Max')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "C",
                            "target": "alias(minSeries(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=ruby_process_resident_memory_bytes'), 3)), 'Min')"
                        }
                    ],
                    "title": "Ruby Memory per Worker",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 3600000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "min": 0,
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 13,
                        "x": 11,
                        "y": 24
                    },
                    "id": 84,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "list",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(sum(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=puma_queued_connections'), 3)), 'Queued Requests')"
                        }
                    ],
                    "title": "Queued Requests",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "Ruby CPU \u043d\u0430 \u043e\u0434\u0438\u043d Worker",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 3600000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "min": 0,
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 11,
                        "x": 0,
                        "y": 32
                    },
                    "id": 85,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "list",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(perSecond(avg(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=ruby_process_cpu_seconds_total'), 3))), 'Average')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(perSecond(maxSeries(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=ruby_process_cpu_seconds_total'), 3))), 'Max')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "C",
                            "target": "alias(perSecond(minSeries(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=ruby_process_cpu_seconds_total'), 3))), 'Min')"
                        }
                    ],
                    "title": "Ruby CPU per Worker",
                    "type": "timeseries"
                },
                {
                    "datasource": "carbon-short",
                    "description": "\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "lineInterpolation": "smooth",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "never",
                                "spanNulls": 3600000,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "min": 0,
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byName",
                                    "options": "Available Workers"
                                },
                                "properties": [
                                    {
                                        "id": "custom.lineStyle",
                                        "value": {
                                            "dash": [
                                                10,
                                                10
                                            ],
                                            "fill": "dash"
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 13,
                        "x": 11,
                        "y": 32
                    },
                    "id": 86,
                    "options": {
                        "legend": {
                            "calcs": [],
                            "displayMode": "list",
                            "placement": "bottom"
                        },
                        "tooltip": {
                            "mode": "single"
                        }
                    },
                    "targets": [
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "A",
                            "target": "alias(sum(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=puma_active_connections'), 3)), 'Average')"
                        },
                        {
                            "hide": true,
                            "refCount": 0,
                            "refId": "B",
                            "target": "alias(sum(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=puma_active_connections'), 3)), 'Max')"
                        },
                        {
                            "hide": false,
                            "refCount": 0,
                            "refId": "C",
                            "target": "alias(sum(keepLastValue(seriesByTag('gitlabinstance=$gitlabinstance', 'name=puma_max_threads'), 3)), 'Available Workers')"
                        }
                    ],
                    "title": "Active Requests",
                    "type": "timeseries"
                }
            ],
            "title": "Rails App",
            "type": "row"
        }
    ],
    "refresh": "",
    "schemaVersion": 30,
    "style": "dark",
    "tags": [
        "telegraf"
    ],
    "templating": {
        "list": [
            {
                "allValue": null,
                "current": {},
                "datasource": "carbon-short",
                "definition": "tag_values(contur,servertype=gitlab-omnibus)",
                "description": null,
                "error": null,
                "hide": 0,
                "includeAll": false,
                "label": null,
                "multi": false,
                "name": "contur",
                "options": [],
                "query": "tag_values(contur,servertype=gitlab-omnibus)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "type": "query"
            },
            {
                "allValue": null,
                "current": {},
                "datasource": "carbon-short",
                "definition": "tag_values(gitlabinstance,servertype=gitlab-omnibus,contur=$contur)",
                "description": null,
                "error": null,
                "hide": 0,
                "includeAll": false,
                "label": null,
                "multi": false,
                "name": "gitlabinstance",
                "options": [],
                "query": "tag_values(gitlabinstance,servertype=gitlab-omnibus,contur=$contur)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "type": "query"
            }
        ]
    },
    "time": {
        "from": "now-5m",
        "to": "now"
    },
    "timepicker": {
        "nowDelay": "",
        "refresh_intervals": [
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
        ]
    },
    "timezone": "",
    "title": "Gitlab - dobrotest",
    "uid": "c_2EbZsnk",
    "version": 1
}